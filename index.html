<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="Assets/favicon.png" />
    <title>Filament Dashboard</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital@0;1&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }

        .filamentC {
            width: 500px;
            height: auto;
            font-style: normal;
            font-size: 24px;
            font-weight: bold;
            user-select: none;
        }

        .filamentC h1 {
            background-color: #668cff;
            color: white;
            text-align: center;
            font-style: italic;
            font-size: 40px;
            margin-bottom: 0;
        }

        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            background-color: #99ccff;
        }

        li {
            padding: 6px;
            padding-left: 40%;
            transition: 1s background-color;
        }

        li:hover {
            background-color: #66b3ff;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="filamentC" id="pla">
        <h1>PLA</h1>
        <ul id="plaUL"></ul>
    </div>
    <div class="filamentC" id="petg">
        <h1>PETG</h1>
        <ul id="petgUL"></ul>
    </div>
    <div class="filamentC" id="abs">
        <h1>ABS</h1>
        <ul id="absUL"></ul>
    </div>
    <div class="filamentC" id="flexible">
        <h1>TPU (Flexible)</h1>
        <ul id="tpuUL"></ul>
    </div>

</body>
<script>
    var dataArr = [];
    var plaListing = document.querySelector("#plaUL");
    var petgListing = document.querySelector("#petgUL");
    var absListing = document.querySelector("#absUL");
    var tpuListing = document.querySelector("#tpuUL");
    function updateFilamentInListing(index) {
        //this creates a new list item element
        var listItem = document.createElement("LI");
        listItem.id = `${dataArr[index].type}item${index + 1}`;
        listItem.classList.add("linkItem");
        switch (dataArr[index].type) {
            case "PLA":
                plaListing.appendChild(listItem);
                break;
            case "PETG":
                petgListing.appendChild(listItem);
                break;
            case "ABS":
                absListing.appendChild(listItem);
                break;
            case "TPU":
                tpuListing.appendChild(listItem);
                break;
            default:
                plaListing.appendChild(listItem);
                break;
        }
        //setting the properties of the filament
        var colorTxt = document.createTextNode(`${dataArr[index].brand} ${dataArr[index].color} - ${dataArr[index].amount}g`);
        listItem.appendChild(colorTxt);
    }
    function updateFilamentListing() {
        for (var index = 0; index < dataArr.length; index++) {
            updateFilamentInListing(index);
        }
    }
    function clearFilamentListing(filamentListing) {
        while (filamentListing.firstChild) {
            filamentListing.removeChild(filamentListing.firstChild);
        }
    }
    fetch('Assets/filament.json', { mode: 'cors' }).then(function (resp) {
        return resp.json();
    }).then(function (data) {
        dataArr = data.filament;
        updateFilamentListing();
    });
    $(".filamentC").on("click", function () {
        if ($(this).find("ul").css("display") == "none") {
            $(this).find("ul").css("display", "block");
        }
        else if ($(this).find("ul").css("display") == "block") {
            $(this).find("ul").css("display", "none");
        }
    });
</script>

</html>